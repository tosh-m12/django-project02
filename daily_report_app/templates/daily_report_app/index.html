{% load custom_filters %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>æ—¥å ±é›†è¨ˆ</title>
    <style>
        table { border-collapse: collapse; width: 100%; margin-top: 1em; }
        th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
        th { background-color: #f2f2f2; }
        .name-link { color: blue; text-decoration: underline; cursor: pointer; }
    </style>
</head>
<body>
    <h2>ğŸ“… æ—¥å ±é›†è¨ˆï¼ˆ{{ target_date }}ï¼‰</h2>

    <form method="get">
        <label>è¡¨ç¤ºæ—¥ä»˜ï¼š</label>
        <input type="date" name="date" value="{{ target_date }}">
        <button type="submit">è¡¨ç¤º</button>
    </form>

    <table>
        <tr>
            <th>æ°å</th>
            <th>å…¥åº«</th><th>å‡ºåº«</th><th>ç™ºè²¨</th><th>é€šé–¢</th><th>é›†é…</th><th>ç‰¹æ®Š</th><th>å‚™è€ƒ</th>
        </tr>
        {% for emp in employees %}
        {% with reports|get_item:emp.id as rep %}
        <tr>
            <!-- <td><a href="#" class="name-link">{{ emp.name }}</a></td> -->
            <td><a href="{% url 'employee_edit' emp.id %}">{{ emp.name }}</a></td>
            <td>{{ rep.inbound|default:"-" }}</td>
            <td>{{ rep.outbound|default:"-" }}</td>
            <td>{{ rep.shipment|default:"-" }}</td>
            <td>{{ rep.customs|default:"-" }}</td>
            <td>{{ rep.delivery|default:"-" }}</td>
            <td>{{ rep.special_tag|default:"-" }}</td>
            <td style="text-align: left;">{{ rep.remarks|default:"" }}</td>
        </tr>
        {% endwith %}
        {% endfor %}
    </table>

    <form method="get" action="{% url 'download_csv' %}" style="margin-top: 1em;">
        <input type="hidden" name="date" value="{{ target_date|date:'Y-m-d' }}">
        <label>
            <input type="checkbox" name="all_data"> å…¨æœŸé–“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        </label>
        <button type="submit">CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
    </form>


</body>
</html>
